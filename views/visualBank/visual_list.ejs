<%- include('../header') %>

<main class="content">

	<!--
	<div class="border regis-tle-box shadow-sm">
		<h5 class="regis-tle">
			<i class="fas fa-edit" style="color:#777;font-size:16px;"></i>&nbsp;&nbsp;온라인통장 &nbsp;&nbsp;
			<span style="color:#bbb; font-size:14px;" id="totCount">(0) </span>
		</h5>
	</div>
-->	
	<form name="frmSearch" id="frmSearch" method="post" onsubmit="return formSearch(event);" >
	<input type="hidden" name="menuCol"   value="">
    <input type="hidden" name="mode"      value="">
	<input type="hidden" name="page"      value="1">
	<input type="hidden" name="titleData" value="">
		<div id="searchFrame">
			<div class="search_action_bar">
				<div class="search_action_left">
					
				</div>
				<div class="search_action_right">
					<input class='custom-control-input' type='checkbox' name='cancel' id='cancel' value='Y'  >
					<span class="unit">취소포함</span>
					<input name="listCount" type="text" value="15" class="search_action_search_input wh40" placeholder="줄수" />
					<span class="unit">줄수</span>
					
					<input type="date" class="date" name="start_date" />
					<span class="tilde">~</span>
					<input type="date" class="date" name="end_date" />
					<select name="iMode" class="search_action_select">
						<option value="" >전체		</option>
						<option value="IN">입금내역				</option>
						<option value="OUT">출금내역			</option>
						<option value="ONOT">출금미매칭			</option>
					</select>
					<select name="sFrom" class="search_action_select">
						<option value="in_person">입금자명		</option>
						<option value="uid">입금번호			</option>
						<option value="content">세부내용		</option>
						<option value="eng_name">영문이름		</option>
						<option value="v_account">계좌번호		</option>
					</select>
					<input name="sWord" type="text" value="" class="search_action_search_input" placeholder="검색어를 입력하세요" />
					<button type="submit" class="search_action_icon_btn" aria-label="검색">🔍</button>
				</div>
			</div>
		</div>
	</form>

	<form name="frmForm" method="post" id="frmForm">
	<input type="hidden" name="uid"  value="">
	<input type="hidden" name="mode" value="">
	<div ID="listFrame" >
		<div ID="listFrameSub" class="search-panel">
			<table class='search-table' id='dtBasic'>
				<tr >
                    <th>넘버</th>
					<th>입금날짜</th>
					<th>은행</th>
					<th colspan="3">계좌번호</th>
					<th>입금액</th>
					<th>예금주명</th>
					<th>처리시간</th>
					<th>취소</th>
					<th>상태</th>
				</tr>
				
			</table>
		</div>
	</div>
	</form>
	<div class="action_bar_split">

		<div class="action_area_left">
			&nbsp;
			
		</div>
		<div class="action_area_center" id="pagingHTML">
		</div>
		<div class="action_area_right">			
			<button class="action_btn_download excel" onClick="return excelDown()" >
				<span class="icon">📊</span>
				엑셀 다운로드
			</button>
		</div>
		
	</div>

</main>
<form name="frmModify" id="frmModify" method="post" >
	<input type="hidden" name="mode"		value="">
	<input type="hidden" name="uid">
	<input type="hidden" name="money_type">
    <input type="hidden" name="gubun_code">

</form>
<div id="basePopUp" style="display:none"></div>
<script type="text/javascript">
<!--

    async function newReg (ticket_num='',gubun='2',type='1',mode='input') {
        frmModify.ticket_num.value = ticket_num;
        frmModify.money_type.value = type;
        frmModify.gubun_code.value = gubun;
        frmModify.mode.value       = mode;
        LoadingStart ();
        json = await dataSaveSend ('frmModify','/visualBank/visualSave');
		title = json.title;
		html  = json.html;
        name  = json.name;
		drawer.open(1500, { title, html  });
        LoadingStop();
	}

	$(document).ready(function() {
		//frmSearch.submit ();
		formSearch (event,'1');
	});

    async function formSearch (e,page=1) {
        if (e) e.preventDefault();
        frmSearch.page.value = page;
		LoadingStart ();
        json = await dataSaveSend ('frmSearch','/visualBank/visual_list');
		success = json.success;
		if (success === "ok") {
            const datas  = json.listData;
            const paging = json.pageData;
            $("#listFrameSub").html(datas);
            $("#pagingHTML").html(paging);
			parent.$("#topTitleData").html(`온라인통장 (${json.totalCount})`);
			frmSearch.titleData.value = `온라인통장 (${json.totalCount})`;
		} else {
            newAlert('목록호출중 오류 발생');
		}
		LoadingStop();
        return false;
	};

	function issueStart(uid) {
		sFile = "/air/order_detail?uid="+uid;
		OpenWindowA(sFile,"",1,1200,800);
	}

//-->
</script>

<%- include('../footer_log') %>